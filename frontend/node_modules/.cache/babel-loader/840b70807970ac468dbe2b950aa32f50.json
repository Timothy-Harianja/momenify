{"ast":null,"code":"import _classCallCheck from\"/Users/Jack/Desktop/CSE_312/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Jack/Desktop/CSE_312/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Jack/Desktop/CSE_312/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Jack/Desktop/CSE_312/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Jack/Desktop/CSE_312/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import\"./signup.css\";import axios from\"axios\";import Login from\"../login/login.jsx\";function makeTime(){var ts=Date.now();var date_ob=new Date(ts);var date=date_ob.getDate();var month=date_ob.getMonth()+1;var year=date_ob.getFullYear();return month+\"-\"+\"date\"+\"-\"+year;}function makeToken(length){var result=\"\";var characters=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";var charactersLength=characters.length;for(var i=0;i<length;i++){result+=characters.charAt(Math.floor(Math.random()*charactersLength));}return result;}var Signup=/*#__PURE__*/function(_Component){_inherits(Signup,_Component);function Signup(){var _getPrototypeOf2;var _this;_classCallCheck(this,Signup);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Signup)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={nickname:null,password:null,email:null,activation:false,activeToken:null,activeTokenExpire:null,lastLogin:null};_this.submitHandler=function(e){e.preventDefault();};_this.putDataToUsers=function(json){console.log(\"this.json:\",json);console.log(\"this.props:\",_this.props);axios.post(\"http://localhost:3001\"+\"/putUser\",json).then(function(res){console.log(\"res: \",res);console.log(\"res data: \",res.data);if(res.data.success){alert(\"register successed\");}else{alert(\"failed\");}}).catch(function(err){console.log(err);});};return _this;}_createClass(Signup,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:\"SignUp\"},React.createElement(\"form\",{onSubmit:this.submitHandler},React.createElement(\"h3\",null,\"Sign Up\"),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Nickname\"),React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"First name\",onChange:function onChange(e){return _this2.setState({nickname:e.target.value});}})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Email address\"),React.createElement(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"Enter email\",onChange:function onChange(e){return _this2.setState({email:e.target.value});}})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Password\"),React.createElement(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Password\",onChange:function onChange(e){return _this2.setState({password:e.target.value});}})),React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\",onClick:function onClick(){_this2.putDataToUsers({nickname:_this2.state.nickname,password:_this2.state.password,email:_this2.state.email,activation:_this2.state.activation,lastLogin:makeTime(),activeToken:makeToken(30),activeTokenExpire:new Date().getTime()+24*60*60*1000});}},\"Sign Up\"),React.createElement(\"p\",{className:\"forgot-password text-right\"},\"Already registered\",\" \",React.createElement(\"a\",{href:\"#login\",onSelect:function onSelect(){_this2.props.setBody(React.createElement(Login,null));}},\"sign in?\"))));}}]);return Signup;}(Component);export default Signup;","map":{"version":3,"sources":["/Users/Jack/Desktop/CSE_312/frontend/src/components/signup/signup.jsx"],"names":["React","Component","axios","Login","makeTime","ts","Date","now","date_ob","date","getDate","month","getMonth","year","getFullYear","makeToken","length","result","characters","charactersLength","i","charAt","Math","floor","random","Signup","state","nickname","password","email","activation","activeToken","activeTokenExpire","lastLogin","submitHandler","e","preventDefault","putDataToUsers","json","console","log","props","post","then","res","data","success","alert","catch","err","setState","target","value","getTime","setBody"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./signup.css\";\nimport axios from \"axios\";\nimport Login from \"../login/login.jsx\";\n\nfunction makeTime() {\n  let ts = Date.now();\n  let date_ob = new Date(ts);\n  let date = date_ob.getDate();\n  let month = date_ob.getMonth() + 1;\n  let year = date_ob.getFullYear();\n  return month + \"-\" + \"date\" + \"-\" + year;\n}\n\nfunction makeToken(length) {\n  var result = \"\";\n  var characters =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  var charactersLength = characters.length;\n  for (var i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n\nclass Signup extends Component {\n  state = {\n    nickname: null,\n    password: null,\n    email: null,\n    activation: false,\n    activeToken: null,\n    activeTokenExpire: null,\n    lastLogin: null\n  };\n\n  submitHandler = e => {\n    e.preventDefault();\n  };\n\n  putDataToUsers = json => {\n    console.log(\"this.json:\", json);\n    console.log(\"this.props:\", this.props);\n    axios\n      .post(\"http://localhost:3001\" + \"/putUser\", json)\n      .then(res => {\n        console.log(\"res: \", res);\n        console.log(\"res data: \", res.data);\n\n        if (res.data.success) {\n          alert(\"register successed\");\n        } else {\n          alert(\"failed\");\n        }\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  render() {\n    return (\n      <div className=\"SignUp\">\n        <form onSubmit={this.submitHandler}>\n          <h3>Sign Up</h3>\n\n          <div className=\"form-group\">\n            <label>Nickname</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"First name\"\n              onChange={e => this.setState({ nickname: e.target.value })}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>Email address</label>\n            <input\n              type=\"email\"\n              className=\"form-control\"\n              placeholder=\"Enter email\"\n              onChange={e => this.setState({ email: e.target.value })}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>Password</label>\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              placeholder=\"Password\"\n              onChange={e => this.setState({ password: e.target.value })}\n            />\n          </div>\n          <button\n            type=\"submit\"\n            className=\"btn btn-primary btn-block\"\n            onClick={() => {\n              this.putDataToUsers({\n                nickname: this.state.nickname,\n                password: this.state.password,\n                email: this.state.email,\n                activation: this.state.activation,\n                lastLogin: makeTime(),\n                activeToken: makeToken(30),\n                activeTokenExpire: new Date().getTime() + 24 * 60 * 60 * 1000\n              });\n            }}\n          >\n            Sign Up\n          </button>\n          <p className=\"forgot-password text-right\">\n            Already registered{\" \"}\n            <a\n              href=\"#login\"\n              onSelect={() => {\n                this.props.setBody(<Login />);\n              }}\n            >\n              sign in?\n            </a>\n          </p>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}